language: php
php:
  - '7.1'
  - '7.2'
  - nightly

before_script:
  - composer self-update

install:
  - composer install --prefer-source --no-interaction

script: phpunit

matrix:
 allow_failures:
   - php: nightly
 fast_finish: true

deploy:
  provider: heroku
  api_key:
    secure: YEY/bKhV6gZ/HTDc7C//GdgRnKKPFnDZzjrkm+LoOVHYg/dFNbyYJO+oTmJ0ye3KrqX531FsjlBGbocNpH2ILmM1dnV6jLH8DML+p3V23Ums3dkoyv+4sx0R7YoAXeh7nQJBOV+VTIOHNfcxSZrnQRXjKpx0ZVs5LHfxtdOaNr3HrBYxFAbB5fbd2O0c3yozn0YA5dmt3e8gOdtgtlQeRGCbu5bo0wXkJiGMMXjd4wq+bo+twMF7kvkLNVbFNqBv0X/FkjD7lKKmUoatcuqMmkB7yZajGm3hnRvMFFU8lAih3AjvLtKjV7VCqkiySYYXvoatz38dBME5oIeLyoAs22u4fNWlQmiWl3KRP7SestkgPZFgkBfP7Gokzwg4oAMSGfQ81yq/tNhGKLfVIB12uC1KMv27uTZqgiQ1zNYzCpX1VgQ9Pe/hwmKDQDuVPwpqa6JjGLv+QlGb6cLwWpf62/8/Y2BTkC7jvlQU0uKLciV8TzaQv9kNw2+U8bFxhfwvKO9CXi17/MAGK1FsuGn0uYQJasCJ9lEzbMKFJgA5LKcOiddsGkD+1wDK3j4N54T7Z2ENmIJapS81XIGtRGO+ab5hbC4P5mgJrjeinfTBD0dGAph5ETZo0dBMJCO0latJ7OcWLFXQl0Lj2jbMN10sajWmwOG+OoCdyJ9SZ4jve0I=
  app: bfh-webshop-backend
  on:
    repo: janfriedli/bfh-webshop-backend

notifications:
   on_success: never
   on_failure: always