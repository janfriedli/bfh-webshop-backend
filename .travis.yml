language: php
php:
  - '7.1'
  - '7.2'
  - nightly

before_script:
  - composer self-update

install:
  - composer install --prefer-source --no-interaction

script: phpunit

matrix:
 allow_failures:
   - php: nightly
 fast_finish: true

deploy:
  provider: heroku
  api_key:
    secure: TqQAuksANxWcJC95/qUJ1fp0KZxKTFDkHUtTGNOZfbkuqKWLA0cdi0sP4qv8Rg8i9PdRhdjFAxbo9NSREmEoJ/2XkVBJSvTPTzYLCqdtKaNb7iEpLCig0T0WNX3HtaQ4nRtdFkmHT9GvG39WYiOIkIIUdmY0fQglZrbZizDuRbTZrot+zG+p3sNv+wKYyrpZFfaYpFPV5HDmI6uwdou7OXdvNNCVpt37+KfNDj20OMSYueFAUHVTJpoGEZf2G4ZeZw/E1Uf72qWOEHXMMG4zHsH+3i/Una72Ft0pm/I5sZr4sP4TOkTLItzW04J3jtSqmrH+GYlTW3DB82dYgFgMSa2gDNDYtXb9iffnUE6R8h4sKDZdEpjiJuRjyIo7ZqKzsDiyimHjNiFgc0N0TAo/ot+o1TS02aEN89SSXfnmQu7840H6Iq4AGnvryDVIZX8t5rSk8XLvZLFWrKluZGtf3osSmiE5wmllxLrfCwMyn6xTf2eSTp7MeVFAaKNZZuLteyk/X5vuKh8kTwEL/ayaPZKfnqHcPRoK6V2x3FK078AIqx5WdZ4jRRkOxMRA55aDDdRk0A0QuLxo/W0/Pp4RL5qnsKPsqV/cXI6iHnnPG9Vhwyjy680+5+jXaIJX3d9rT28JVOj5VXFEinZxj4ns5c5YwINpafwaJKdWIJqeLeY=
  app: bfh-webshop-backend
  on:
    repo: janfriedli/bfh-webshop-backend

notifications:
   on_success: never
   on_failure: always